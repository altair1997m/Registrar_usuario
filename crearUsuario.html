<!-- <%-- 
    Document   : crearUsuario
    Created on : 5 ago. 2024, 08:55:00
    Author     : telemetria
--%> -->


<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>S.I.A.GE.M.I.</title>
        <link href="../../../src/bootstrap-5.3.3-dist/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <link href="../../../src/css/administrador_Sistema/diseñoFormulario.css" rel="stylesheet" type="text/css"/>
        <link href="../../../src/css/all.min.css" rel="stylesheet" type="text/css"/>
        <link href="../../../src/css/fontawesome.min.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
        <script src="../../../src/JS/administradorSistema/insertarImg.js" defer></script>
        <script src="../../../src/JS/administradorSistema/error.js" defer></script>
        <style>
            .error { color: red; font-size: 0.8em; display: block; }
            .image-preview img { max-width: 100px; }
        </style>
    </head>
    <body>
        <!-- menu con encabezado -->
        <div class="container-1">
            <div class="navigation">
                <div class="logotipo">
                    <div class="menu-logotipo">
                        <button class="toggle">
                            <img class="logo2" src="../../../src/imagenes/dashboard/hamburgesa.png" alt=""/> 
                        </button>
                        <img class="logo1" src="../../../src/imagenes/escudo.png" alt=""/>

                    </div>
                    <div class="titulo-logotipo">
                        <h1 class="titulo">
                            S.I.A.GE.M.I.
                        </h1>
                    </div>
                    <div class="foto-perfil">
                        <img class="foto" src="../../../src/imagenes/dashboard/Captura desde 2024-09-26 10-02-23.png" alt=""/>
                    </div>
                </div>
                <ul>
                    <li>

                    </li>
                    <li>
                        <a href="../../indexAdminSistema.html">
                            <span class="icon">
                                <div class="cuadrado">
                                    <i class="fas fa-fighter-jet" style="color: #FFFFFF;"></i>
                                </div>

                            </span>

                            <span class="title">
                                Inicio
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="../mostrarUsuarios.php">
                            <span class="icon">
                                <div class="cuadrado">
                                    <i class="fa-solid fa-person-military-rifle" style="color: #FFFFFF;" ></i>
                                </div>
                            </span>
                            <span class="title">
                                Gestión de Usuarios
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="../gestionRoles.html">
                            <span class="icon">
                                <div class="cuadrado">
                                    <i class="fa-solid fa-person-military-rifle" style="color: #FFFFFF;" ></i>
                                </div>
                            </span>
                            <span class="title">
                                Gestión de Roles
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="../gestionArea.html">
                            <span class="icon">
                                <div class="cuadrado">
                                    <i class="fa-solid fa-person-military-rifle" style="color: #FFFFFF;" ></i>
                                </div>
                            </span>
                            <span class="title">
                                Gestión de Areas
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="../gestionRedes.html">
                            <span class="icon">
                                <div class="cuadrado">
                                    <i class="fa-solid fa-person-military-rifle" style="color: #FFFFFF;" ></i>
                                </div>
                            </span>
                            <span class="title">
                                Gestión de Redes
                            </span>
                        </a>
                    </li>
                    <li>
                        <a>
                            <span class="icon">
                                <div class="cuadrado">
                                    <i class="fa-solid fa-person-military-rifle" style="color: #FFFFFF;" ></i>
                                </div>
                            </span>
                            <span class="title">
                                Gestión de Base de Datos
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="../gestionInstalaciones.html">
                            <span class="icon">
                                <div class="cuadrado">
                                    <i class="fa-solid fa-person-military-rifle" style="color: #FFFFFF;" ></i>
                                </div>
                            </span>
                            <span class="title">
                                Gestión de Instalaciones
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="../gestionHistorial.html">
                            <span class="icon">
                                <div class="cuadrado">
                                    <i class="fa-solid fa-person-military-rifle" style="color: #FFFFFF;" ></i>
                                </div>
                            </span>
                            <span class="title">
                                Historial
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="../gestionFichTec.html">
                            <span class="icon">
                                <div class="cuadrado">
                                    <i class="fa-solid fa-person-military-rifle" style="color: #FFFFFF;" ></i>
                                </div>
                            </span>
                            <span class="title">
                                Gestión Fichas Tecnicas
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="../gestionOrdenTrabajo.html">
                            <span class="icon">
                                <div class="cuadrado">
                                    <i class="fa-solid fa-person-military-to-person" style="color: #FFFFFF;"></i>
                                </div>
                            </span>
                            <span class="title">
                                Gestión de Ordenes de trabajo
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="../gestionManuales.html">
                            <span class="icon">
                                <div class="cuadrado">
                                    <i class="fa-brands fa-hive" style="color: #FFFFFF;"></i>
                                </div>
                            </span>
                            <span class="title">
                                Gestión de Manuales
                            </span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <!-- Main -->
        <div class="main">
            <div class="topbar">
                <div class="row align-items-center contenedorMenu">
                    <div class="col-lg-5 col-4">
                        <div class="direccion">
                            <span class="icono">
                                <i class="fa-solid fa-house-chimney"></i>
                            </span>
                            <span class="url">/Usuario</span> 
                        </div>
                    </div>
                    <div class="col-lg-7 col-8">
                        <div class="d-flex justify-content-end align-items-center">
                            <!-- BUSCADOR -->
                            <div class="flex-grow-1 me-3">
                                <div class="input-group flex-nowrap">
                                    <i class="fa-solid fa-magnifying-glass buscar input-group-text" id="addon-wrapping"></i>
                                    <input type="text" class="form-control" placeholder="Buscar" aria-label="Buscar" aria-describedby="addon-wrapping">
                                </div>
                            </div>
                            <!-- CONFIGURACIÓN Y NOTIFICACIÓN -->
                            <div class="d-flex align-items-center">
                                <!-- Boton de configuracion para abrir su cuadro de dialogo -->
                                <div class="confi me-3">
                                    <button class="icono" id="open-dialog">
                                        <i class="fa-solid fa-gear" alt="Abrir diálogo"></i> 
                                    </button>
                                </div>
                                <!-- Final de boton de dialogo -->

                                <!-- Cuadro de dialogo -->
                                <div id="dialog" class="dialog">
                                    <div class="dialog-content">
                                        <div class="foto-perfil">
                                            <img class="foto1" src="../../../src/imagenes/dashboard/Captura desde 2024-09-26 10-02-23.png" alt=""/>
                                        </div>
                                        <span id="close-dialog" class="close">&times;</span>

                                        <div class="nom11">Jose Hernández Peréz</div>                                            
                                        <div class="row contenedor-2">
                                            <div class="col-lg-6 mb-3">
                                                <div class="card-1 h-100 d-flex flex-column">                                                        
                                                    <div class="flex-grow-1 d-flex flex-column">
                                                        <div>Matricula: </div>
                                                        <div> 25HM34GHM12  </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 mb-3">
                                                <div class="card-1 h-100 d-flex flex-column">
                                                    <div class="flex-grow-1 d-flex flex-column">
                                                        <div>Grado: </div>
                                                        <div> Teniente II </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- botones -->
                                        <div class="row contenedor-2">
                                            <div class="col-lg-6 mb-3">
                                                <div class="h-100 d-flex flex-column">     
                                                    <a href="../../../Login.html">
                                                        <button class="cerrarsesion">
                                                            CERRAR SESIÓN
                                                        </button>
                                                    </a>
                                                </div>
                                            </div>
                                            <div class="col-lg-6 mb-3">
                                                <div class="card-5 h-100 d-flex flex-column">
                                                    <div class="flex-grow-1 d-flex flex-column">
                                                        <a href="../actualizarPerfilAG.html">
                                                            <button class="actualizarperfil">
                                                                ACTUALIZAR PERFIL
                                                            </button>
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Termina botones -->
                                    </div>
                                </div>
                                <!-- Termina cuadro de dialogo -->

                                <!-- Boton de notificacion para abrir su cuadro de dialogo -->
                                <div class="notificacion">
                                    <button class="icono" id="open-dialog1">
                                        <i class="fa-solid fa-bell" alt="Abrir diáligo1"></i>
                                    </button>
                                </div>
                                <!-- Termina boton de notificacion para abrir cuadro de dialogo -->

                                <!-- Cuadro de dialogo -->
                                <div id="dialog1" class="dialog1">
                                    <div class="dialog-content1">
                                        <span id="close-dialog1" class="close1">&times;</span>
                                        <h2>Este es el contenido del cuadro de dialogo</h2>
                                        <p>Puedes añadir mas contenido aquí.</p>
                                    </div>
                                </div>
                                <!-- Termina boton de notificacion para abrir su cuadro de dialogo -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Termina menu con encabezado -->
            <!-- comienza formulario -->
            <!-- te recomiendo buscar las cosas por partes ya que al buscarlo todos juntosa no suele salir o cambia algunas cosas chat -->
            <div class="tablas">
                <div class="container">
                    <div class="title">Registrar Usuario</div>
                    <div class="subtit">Ingrese los datos del usuario y seleccione el rol y el grado. Complete todos los campos y respete las validaciones correspondientes.</div>
                    <form id="formRegistrarUsuario" enctype="multipart/form-data">
                        <div class="user-details">
                            <!-- Nombre -->
                            <div class="input-box">
                                <span class="details">Nombre:</span>
                                <input type="text" id="nombre" name="nombre" placeholder="Ej: Said.">
                                <span class="error" id="errorNombre"></span>
                            </div>
                            <!-- Apellido paterno -->
                            <div class="input-box">
                                <span class="details">Apellido paterno:</span>
                                <input type="text" id="ap_paterno" name="ap_paterno" placeholder="Ej: Gódinez">
                                <span class="error" id="errorApa"></span>
                            </div>
                            <!-- Otros campos del formulario -->
                            <div class="input-box">
                                <span class="details">Apellido materno:</span>
                                <input type="text" id="ap_materno" name="ap_materno" placeholder="Ej: Garcia">
                                <span class="error" id="errorAma"></span>
                            </div>
                            <!-- Especialidad -->
                            <div class="input-box">
                                <span class="details">Especialidad:</span>
                                <input type="text" id="especialidad" name="especialidad" placeholder="Ej: Ingeniero en sistemas.">
                                <span class="error" id="errorEspecialidad"></span>
                            </div>
                            <!-- Matrícula -->
                            <div class="input-box">
                                <span class="details">Matrícula:</span>
                                <input type="text" id="matricula" name="matricula" placeholder="Solo letras y números.">
                                <span class="error" id="matriculaError"></span>
                            </div>
                            <!-- Rol -->
                            <div class="input-box">
                                <span class="details">Rol:</span>
                                <select id="rol" name="rol">
                                    <option value="">Selecciona una opción</option>
                                    <option value="Administrador Sistema">Administrador Sistema</option>
                                    <option value="Inspector/Supervisor">Inspector/Supervisor</option>
                                    <option value="Operador/Usuario">Operador/Usuario</option>
                                </select>
                                <span class="error" id="errorRol"></span>
                            </div>
                            <!-- Área -->
                            <div class="input-box">
                                <span class="details">Área:</span>
                                <select id="area" name="area">
                                    <option value="">Selecciona una opción</option>
                                    <option value="CAD CAE">CAD CAE</option>
                                    <option value="Embebidos">Embebidos</option>
                                    <option value="Electronica/Avionica">Electrónica/Aviónica</option>
                                    <option value="Software">Software</option>
                                    <option value="Manofactura">Manufactura</option>
                                </select>
                                <span class="error" id="errorArea"></span>
                            </div>
                            <!-- Cargo de área -->
                            <div class="input-box">
                                <span class="details">Cargo de área:</span>
                                <input type="text" id="cargoArea" name="cargoArea" placeholder="Ingresa tu cargo de área.">
                                <span class="error" id="errorCargo"></span>
                            </div>
                            <!-- Grado -->
                            <div class="input-box">
                                <span class="details">Grado:</span>
                                <select id="grado" name="grado">
                                    <option value="">Selecciona una opción</option>
                                    <option value="Sub Teniente">Sub Teniente</option>
                                    <option value="Teniente">Teniente</option>
                                    <option value="Capitan">Capitán</option>
                                    <option value="General">General</option>
                                </select>
                                <span class="error" id="errorGrado"></span>
                            </div>
                            <!-- Teléfono -->
                            <div class="input-box">
                                <span class="details">Teléfono:</span>
                                <input type="text" id="telefono" name="telefono" placeholder="Ingresa tu teléfono.">
                                <span class="error" id="errorTelefono"></span>
                            </div>
                            <!-- Años de servicio -->
                            <div class="input-box">
                                <span class="details">Años de servicio:</span>
                                <input type="text" id="años_trabajo" name="años_trabajo" placeholder="Ingresa los años de servicio.">
                                <span class="error" id="errorServicio"></span>
                            </div>
                            <!-- Contraseña -->
                            <div class="input-box">
                                <span class="details">Contraseña:</span>
                                <input type="password" id="contraseña" name="contraseña" placeholder="Ingresa tu contraseña.">
                                <span class="error" id="errorContraseña"></span>
                            </div>
                            <!-- Verificación de contraseña -->
                            <div class="input-box">
                                <span class="details">Verifica contraseña:</span>
                                <input type="password" id="contraseña2" name="contraseña2" placeholder="Confirma tu contraseña.">
                                <span class="error" id="errorContraseña2"></span>
                            </div>
                            <!-- Imagen de perfil -->
                            <div class="input-box">
                                <span class="details">Selecciona una imagen:</span>
                                <input type="file" id="image" name="image" accept="image/*">
                            </div>
                            <div id="image-preview" class="image-preview"></div>
                        </div>
                        <div class="button">
                            <input type="submit" value="REGISTRAR">
                        </div>
                    </form>
                </div>
            </div>
            <div class="barraC1"></div>
        </div>




        <script src="../src/bootstrap-5.3.3-dist/js/bootstrap.min.js" type="text/javascript"></script>
        <script>
            document.getElementById('formRegistrarUsuario').addEventListener('submit', async function(event) {
                event.preventDefault(); // Evita el envío tradicional del formulario
    
                const formData = new FormData(this);
    
                // Ejemplo de validación simple
                let valid = true;
                if (!formData.get('nombre') || !/^[a-zA-Z]+$/.test(formData.get('nombre'))) {
                    document.getElementById('errorNombre').innerText = "Este campo es obligatorio y solo debe contener letras.";
                    valid = false;
                } else {
                    document.getElementById('errorNombre').innerText = ""; // Limpiar mensaje de error
                }
    
                if (!valid) return; // Si no pasa la validación, no se envía
    
                try {
                    const response = await fetch('/S.I.A.GE.M.IV1.4/src/main/webapp/vistas/administradorSistema/formularios/CrearUsuario.php', {
                        method: 'POST',
                        body: formData
                    });
    
                    const data = await response.json();
                    if (response.ok) {
                        alert('Usuario registrado exitosamente.');
                    } else {
                        alert('Error: ' + data.error);
                    }
                } catch (error) {
                    console.error('Error en la solicitud:', error);
                    alert('Hubo un error al procesar la solicitud.');
                }
            });
    
            document.getElementById('image').addEventListener('change', function(event) {
                const file = event.target.files[0];
                const reader = new FileReader();
                reader.onload = function() {
                    document.getElementById('image-preview').innerHTML = `<img src="${reader.result}" alt="Vista previa de imagen">`;
                };
                reader.readAsDataURL(file);
            });
        </script>
        <script>
            let toggle = document.querySelector('.toggle');
            let navigation = document.querySelector('.navigation');
            let foto = document.querySelector('.foto');
            let main = document.querySelector('.main');
            let titulo = document.querySelector('.titulo');
            let logo1 = document.querySelector('.logo1');

            toggle.onclick = function () {
                navigation.classList.toggle('active');
                foto.classList.toggle('active');
                main.classList.toggle('active');
                titulo.classList.toggle('active');
                logo1.classList.toggle('active');
            };

        </script>

        <script>
            // Selecciona todos los elementos <li> dentro de .navigation
            let list = document.querySelectorAll('.navigation li');

            // Define la función que activa el estilo 'hovered' en el elemento actual
            function activeLink() {
                // Remueve la clase 'hovered' de todos los elementos <li> dentro de .navigation
                list.forEach((item) => {
                    item.classList.remove('hovered');
                });

                // Agrega la clase 'hovered' solo al elemento sobre el cual se está pasando el mouse
                this.classList.add('hovered');
            }

            // Itera sobre todos los elementos <li> para agregar el evento 'mouseover'
            list.forEach((item) => {
                item.addEventListener('mouseover', activeLink);
            });
        </script>

        <script>
            const openDialogButton = document.getElementById('open-dialog');
            const dialog = document.getElementById('dialog');
            const closeDialogButton = document.getElementById('close-dialog');

            function openDialog() {
                dialog.style.display = 'flex';
            }

            function closeDialog() {
                dialog.style.display = 'none';
            }

            openDialogButton.addEventListener('click', openDialog);
            closeDialogButton.addEventListener('click', closeDialog);

            window.addEventListener('click', function (event) {
                if (event.target === dialog) {
                    closeDialog();
                }
            });
        </script>

        <script>
            const openDialogButton1 = document.getElementById('open-dialog1');
            const dialog1 = document.getElementById('dialog1');
            const closeDialogButton1 = document.getElementById('close-dialog1');

            function openDialog1() {
                dialog1.style.display = 'flex';
            }

            function closeDialog1() {
                dialog1.style.display = 'none';
            }

            openDialogButton1.addEventListener('click', openDialog1);
            closeDialogButton1.addEventListener('click', closeDialog1);

            window.addEventListener('click', function (event) {
                if (event.target === dialog1) {
                    closeDialog1();
                }
            });
        </script>
    </body>
</html>

<!-- Tu puedes Aimeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee! -->